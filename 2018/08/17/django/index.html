<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-cn">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="django基础,">










<meta name="description" content="框架介绍框架运行流程 中间件处理request 路由系统匹配request中的url 进入中间件的process_view 处理 处理后分发到相应的view view 完成 逻辑处理 与 ORM 数据库操作 process_response 对 view 发出的 response 进行加工 返回完整的response  框架主要划分   名称 功能 描述     路由系统 匹配url，并进行分发">
<meta name="keywords" content="django基础">
<meta property="og:type" content="article">
<meta property="og:title" content="django">
<meta property="og:url" content="http://yoursite.com/2018/08/17/django/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="框架介绍框架运行流程 中间件处理request 路由系统匹配request中的url 进入中间件的process_view 处理 处理后分发到相应的view view 完成 逻辑处理 与 ORM 数据库操作 process_response 对 view 发出的 response 进行加工 返回完整的response  框架主要划分   名称 功能 描述     路由系统 匹配url，并进行分发">
<meta property="og:locale" content="zh-cn">
<meta property="og:updated_time" content="2018-11-29T02:08:13.736Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="django">
<meta name="twitter:description" content="框架介绍框架运行流程 中间件处理request 路由系统匹配request中的url 进入中间件的process_view 处理 处理后分发到相应的view view 完成 逻辑处理 与 ORM 数据库操作 process_response 对 view 发出的 response 进行加工 返回完整的response  框架主要划分   名称 功能 描述     路由系统 匹配url，并进行分发">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"hide","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2018/08/17/django/">





  <title>django | Hexo</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-cn">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hexo</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">岁月如风，吹散青春</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/17/django/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Laurel-rao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">django</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-08-17T08:47:21+08:00">
                2018-08-17
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/web-framework/" itemprop="url" rel="index">
                    <span itemprop="name">web_framework</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="框架介绍"><a href="#框架介绍" class="headerlink" title="框架介绍"></a>框架介绍</h1><h2 id="框架运行流程"><a href="#框架运行流程" class="headerlink" title="框架运行流程"></a>框架运行流程</h2><ol>
<li>中间件处理request</li>
<li>路由系统匹配request中的url</li>
<li>进入中间件的process_view 处理</li>
<li>处理后分发到相应的view</li>
<li>view 完成 逻辑处理 与 ORM 数据库操作</li>
<li>process_response 对 view 发出的 response 进行加工</li>
<li>返回完整的response</li>
</ol>
<h2 id="框架主要划分"><a href="#框架主要划分" class="headerlink" title="框架主要划分"></a>框架主要划分</h2><table>
<thead>
<tr>
<th>名称</th>
<th>功能</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>路由系统</td>
<td>匹配url，并进行分发</td>
<td>只有在 urlpatterns列表中的url 才能分发，否则返回 404</td>
</tr>
<tr>
<td>中间件</td>
<td>从接受请求和发出响应，中间件都可进行处理</td>
<td>中间件功能强大，对中间件进行处理，可免除每个URL 函数都进行处理</td>
</tr>
<tr>
<td>视图系统</td>
<td>完成网站的大部分逻辑</td>
<td>处于框架的中心部位，承上启下</td>
</tr>
<tr>
<td>ORM系统</td>
<td>对数据库进行操作， 提供大部分的数据操作功能</td>
<td>能够对不同数据库管理系统进行隔离，只需要关心数据本身</td>
</tr>
<tr>
<td>模版系统</td>
<td>使用模版语言，对静态页面以对象的方式管理</td>
<td>能够完成 模版 + 变量 =》 html页面的功能，轻松编写html</td>
</tr>
<tr>
<td>后台管理</td>
<td>Django 自带的网站后台</td>
<td>可管理数据，权限， 用户</td>
</tr>
<tr>
<td>form表单</td>
<td>轻松编写form</td>
<td>不需要自己编写form 表单，只需几行代码即可完成form的编写</td>
</tr>
</tbody>
</table>
<h1 id="快速开始"><a href="#快速开始" class="headerlink" title="快速开始"></a>快速开始</h1><ol>
<li><p>开始你的项目</p>
<pre><code>pip install django==2.1
</code></pre></li>
<li><p>完成主要设置</p>
<ol>
<li><p>打开settings 文件， 对以下变量进行设置 <a href="https://docs.djangoproject.com/en/2.1/ref/settings/" target="_blank" rel="noopener">关于 settings</a></p>
<pre><code>ALLOWED_HOSTS = [&quot;*&quot;]  # 允许访问地址
DEBUG = True               # 打开调试者模式
INSTALLED_APPS = [
    ...
    index,
]
DATABASES = []         # 设置数据库
</code></pre></li>
</ol>
</li>
</ol>
<ol start="3">
<li><p>大型项目设置</p>
</li>
<li><p>相应的问题 与 解决方案</p>
<ol>
<li><p>服务器无法开启，解释器 或 虚拟环境问题</p>
<pre><code>File &quot;manage.py&quot;, line 14
      ) from exc
           ^
  SyntaxError: invalid syntax
</code></pre><ol>
<li>更换 python 解释器， 使用 python3 manage.py runserver 0:8888</li>
<li>使用 virtualenv 或 pycharm 环境管理 或 pipenv（virtualenv升级版）</li>
</ol>
</li>
</ol>
</li>
</ol>
<h1 id="Models-使用"><a href="#Models-使用" class="headerlink" title="Models 使用"></a>Models 使用</h1><h2 id="连接数据库"><a href="#连接数据库" class="headerlink" title="连接数据库"></a>连接数据库</h2><h3 id="配置mysql数据库"><a href="#配置mysql数据库" class="headerlink" title="配置mysql数据库"></a>配置mysql数据库</h3><ol>
<li><p>在 主目录下的 <strong>init</strong>.py 文件中, 安装 mysql服务，否则报错</p>
<pre><code>import pymysql
pymysql.install_as_MySQLdb()
</code></pre></li>
<li><p>在数据库中创建 一个库 web, sql 语句</p>
<pre><code>create database web default charset &quot;utf8&quot; collate utf8_general_ci;
# collate 用来定义排序规则 ci标识不区分大小写 cs标识区分大小写
</code></pre></li>
<li><p>在 settings.py 文件中，设置mysql</p>
<pre><code>DATABASES = {
    &apos;default&apos; : {
        &apos;ENGINE&apos;   : &apos;django.db.backends.mysql&apos;,  # 数据库种类
        &apos;NAME&apos;     : &quot;web&quot;,                # 数据库库名
        &apos;USER&apos;     : &quot;root&quot;,
        &apos;PASSWORD&apos; : &quot;123456&quot;,
        &apos;HOST&apos;     : &quot;ubs_db&quot;,
        &apos;PORT&apos;     : &quot;3306&quot;,
        &apos;OPTIONS&apos;  : {
            &apos;autocommit&apos;: True,
        }
    },
}
</code></pre></li>
<li><p>在models 创建字段, 字段参考(<a href="https://docs.djangoproject.com/en/2.1/ref/models/fields/" target="_blank" rel="noopener">字段及参数</a>)</p>
<pre><code>from django.db import models
class xxxModel(models.Model):
    name = models.CharField(xxx)
</code></pre></li>
<li><p>将 model 类 转移到 数据库(完成自动创建表，修改表字段)， 会在app中创建一个migrations 的文件夹</p>
<pre><code>python manage.py makemigrations
python manage.py migrate
</code></pre></li>
<li><p>操作完毕</p>
</li>
</ol>
<h2 id="操作数据库"><a href="#操作数据库" class="headerlink" title="操作数据库"></a>操作数据库</h2><ol>
<li><p>使用原生ORM操作</p>
<ol>
<li><p>queryset类 方法</p>
<ul>
<li><p>filter() # 一般查找时，忽略大小写，在前面加 i</p>
<ul>
<li>__lt        # 小于</li>
<li>__gt            # 大于</li>
<li>__lte       # 小于等于</li>
<li>__gte       # 大于等于</li>
<li>__exact     # 意义不大，默认为此方式 </li>
<li>__iexact    # 忽略大小写</li>
<li>__isnull    # 是否为空</li>
<li>__regex     # 匹配数据库正则表达式</li>
<li>__contains  # 模糊查找  与 where like “%xx%” 相似</li>
<li>__icontains  # 模糊查找，<strong>且忽略大小写</strong>  与 where like “%xx%” 相似</li>
<li>__startwith # 判断开头  与 where like “xx%” 相似</li>
<li>__endwith   # 判断结尾  与 where like “%xx” 相似</li>
<li><p>__in        # 判断在列表中</p>
<pre><code>ORM: Entry.objects.filter(id__in=[1, 3, 4])
SQL: select * from Entry where id in (1, 3, 4);

ORM: Entry.objects.filter(id__in=&quot;abc&quot;)
SQL: select * from Entry where id in (&quot;a&quot;, &quot;b&quot;, &quot;c&quot;);
</code></pre></li>
<li>__range     # 范围判断</li>
</ul>
</li>
<li>filter(时间判断 参数)<ul>
<li>__year</li>
<li><code>__year__lt</code> # 在日期的上面可以再做大小判断</li>
<li>__month</li>
<li>__day</li>
<li>__week     # ISO-8601返回周数（1-52或53</li>
<li>__time</li>
<li>__hour</li>
<li>__minute</li>
<li>__second</li>
<li></li>
</ul>
</li>
<li>exclude()</li>
<li>count()</li>
<li>values()</li>
<li>values_list() </li>
<li>aggregate()   # 聚合</li>
<li>exists()      # 判断queryset是否有值</li>
</ul>
</li>
</ol>
</li>
<li><p>使用manager</p>
<ol>
<li>默认manager 为 objects</li>
<li><p>可在models中自定义manager名, objects 变为不可用</p>
<pre><code>class xxxModel(models.Model):
    haha = models.Manager()
</code></pre></li>
<li><p>自定义manager方法</p>
<ol>
<li><p>创建自己的manager类</p>
<pre><code>from django.db import models
class myManager(models.Manager):
    def get_count():
        from django.db import connection
        with connection.cursor() as cursor:
            cursor.execute(&quot;&quot;&quot;
                select * from xxx
            &quot;&quot;&quot;)
            print(cursor.fetchall())
            print(cursor.fetchone())

# 应用该manager
class xxxModel(models.Model):
    haha = myManager()
</code></pre></li>
</ol>
</li>
</ol>
</li>
</ol>
<pre><code>2. 使用举例： models.自定义manager.自定义方法()

        xxx.haha.get_count()

3. 一个models 可存在多个 manager

        class xxxModel(models.Model):
            haha = models.Manager()
            objects = models.Manager()

        # 使用举例， 以下两种情况都可以实现

        xxx.objects.all()
        xxx.haha.all()
</code></pre><ol start="3">
<li><p>使用原生sql</p>
</li>
<li><p>使用raw方法</p>
</li>
</ol>
<h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><ol>
<li>queryset 不可作为 JsonResponse直接返回，需要转换为字典或列表</li>
<li>使用 queryset.raw 操作sql 时，无法找到方法去返回对象的部分字段</li>
<li></li>
</ol>
<h1 id="Django主要文件介绍"><a href="#Django主要文件介绍" class="headerlink" title="Django主要文件介绍"></a>Django主要文件介绍</h1><p>views.py(自定义处理函数)</p>
<p>wsgi.py</p>
<pre><code>应用服务器配置
</code></pre><p>settings.py</p>
<pre><code>项目的主设置文件：模板，数据库，应用，．．．
１.BASE_DIR=======当前项目所有的绝对路径
2.DEBUG :　　调试模式
    开发过程：推荐使用True
    上线运行：必须改为False
3.ALLOWED_HOSTS
    设置允许访问本项目的地址列表  设置为 [&apos;*&apos;]
4.INSTALLED_APPS
    指定已安装的应用，如果有自定义应用的话，需要在此注册
5.ROOT_URLCONF
    urls模块的位置
6.TEMPLATES:指定模板的信息
7.DATABASES:指定数据库的信息
８．LANGUAGE_CODE: 指定项目语言，允许修改为＂zh-Hans＂
9.TIME_ZONE:指定时区，建议修改为　Asia/Shanghai
</code></pre><h1 id="路由匹配"><a href="#路由匹配" class="headerlink" title="路由匹配"></a>路由匹配</h1><p>模块介绍<br>    <strong>init</strong>.py<br>        项目初始化文件，每当服务器启动的时候，都会自动执行</p>
<p>urls.py</p>
<ul>
<li>项目的基础url(路由）配置文件／主路由配置文件</li>
<li>将请求地址映射到对应的视图上</li>
<li>默认在主目录中，主路由配置文件，包含所有的地址映射</li>
<li>每一个请求到达后，由urls.py中的urlpatterns中的url()去匹配</li>
<li>当url()匹配上之后，请求给views.py进行处理</li>
</ul>
<p>１．url函数 和 path 函数</p>
<blockquote>
<p>url(regex, views, kwargs=None, name=None)  Django自带    django 版本 1.x</p>
</blockquote>
<hr>
<blockquote>
<p>path(str, views, kwargs=None, name=None)   在url基础上扩展  django 版本 2.x</p>
</blockquote>
<pre><code>1.regex
    正则表达式，用来匹配请求的url
２．views
    当前url对应的处理的视图函数，此处写函数名即可
3.kwargs
    字典，用来向views传参
４．name
    用来给url()起别名，方便在模板中使用
    允许对当前的url设置别名，　在　Template中允许使
    用别名找到对应的url
    {% url '别名'　%}
</code></pre><p>２．通过 url 向　views 传参</p>
<pre><code>１．使用正则表达式子组传参
    使用子组传惨　－　(),一个子组是一个参数，如果想传递多个参数，
    使用多个子组，多个参数之间使用　／　分割
    urlpatterns = [
        # 访问路径是ｒｕｎ，交给run_views
        url(r&quot;^run/$&quot;, run_views)
        # 访问路径是run/两位数字，　交给run_arg1_views
        url(r&apos;^run/(\d{2})/&apos;, run_arg1_views)
    ]
2.使用url()第三个参数，字典传参
    urlpatterns = [
        url(r&quot;^show/$&quot;, show_views, {&quot;name&quot;:&quot;zsf&quot;, &quot;salary&quot;:25, &quot;gender&quot;:&quot;man&quot;})
    ]
</code></pre><h1 id="Django中的应用"><a href="#Django中的应用" class="headerlink" title="Django中的应用"></a>Django中的应用</h1><p>１．什么是应用</p>
<pre><code>- 应用就是网站中的一个独立的程序模块
- 在Django中，主目录一般不处理用于的具体请求，主目录主要做的是项目的初始化和设置，以及请求的分发
</code></pre><p>２.创建应用<br>    １.命令</p>
<pre><code>    1. 在主目录下建立同级 app
               Project-
                         |
                         |_project
                         |_app
            ./manage.py start app 应用名称
    2. 在建立后的project_app 下建立 app







2. 在　settings.py 中进行注册
    在INSTALLED_APPS=[
     &apos;django.contrib.admin&apos;,
        .......,
        &quot;news&quot;,
    ]
3. 应用的结构组成
    1.migrations 目录
        存放数据库的中间文件（日志文件）
    2. __init__.py
        应用的初始化文件
    3.admin.py
        应用的后台管理配置文件
    4.apps.py
        应用的属性配置文件
    5.models.py
        模型文件，与数据库有关
    6.tests.py
        测试模块
    7.views.py
        定义视图的文件
</code></pre><p><a href="http://localhost:8000/news/**" target="_blank" rel="noopener">http://localhost:8000/news/**</a>*<br>一律交给news的urls去处理<br><a href="http://localhost:8000/news/index" target="_blank" rel="noopener">http://localhost:8000/news/index</a></p>
<p>3.模板Templates</p>
<pre><code>１．什么是模板
    模板就是要动态的给用户呈现的网页内容
    其实就是一个网页　－　前后结合的一个网页
２．模板的设置
    settings.py 中　TEMPLATES 变量
    TEMPLATES = [
        {
        &apos;BACKEND&apos;:&quot;...&quot;,
        &quot;DIRS&quot;:[...],
    }
    ]
    1.BACKEND : 制定模板的搜索引擎，不用动
    2.DIRS : 制定模板所存放的目录
        DIRS = [&apos;index.temo&apos;, &apos;music.temp&apos;]
        但是，如果DIRS中为空的话，那么Django会自动
        到每个应用中搜索一个叫templates 的目录来作
        为模板的管理目录
        推荐：
            1.DIRS 内容保持为空
            ２．在每个应用中，都创建一个templates目录
    3.APP_DIRS
        True:首先从DIRS中制定的目录中查找模板，
        如果没找到，再搜索templates目录

3.模板的加载方式

    1.使用　loader 获取模板，并通过　HttpResponse进行响应
        from django.template import loader
        1. 　通过　loader 加载模板
            t = loader.get_template(&apos;模板名称&apos;)
        2.  通过t 对象　，将模板渲染成字符串
            html = t.render()
        3.  通过　HttpRsponse 将　html　响应给　客户端
            return HttpResponse(html)
    2. 使用　render 直接加载模板并返回
        from django.shortcuts import render
        return render(request, &quot;模板名称&quot;)
4.模板的语法
    1.变量
        1.作用：将后端的数据传递给模板，在模板中，会根据变量的值
        进行显示
        ２．在Django 中允许传递给模板做变量的数据类型
            数字，字符串，列表，元组，字典，函数，对象
        ３．变量的语法
            １．loader
                dic = {
                &quot;变量名１&quot;：&quot;值１&quot;
                ．．．
                }
                t = loader.get_template(&quot;xxx.html&quot;)　　　
                html = t.render(dic)
                return HttpResponse(html)
            2.render
                dic = {
                &apos;变量名１&apos;：&quot;值１&quot;
            }
        4.在模板中显示变量：｛｛变量名｝｝
    5.locals（）传参
    2.标签
        １．什么是标签
            允许将服务器段的一些功能嵌入到模板中
        ２．语法
            {% 标签内容　%}
            1.{% for i in attr_list %}
                    <li>{{i}}</li>
                  {% endfor %}
        forloop属性
        forloop.counter
        forloop.first
            2.{% if 条件%}
                    语句块
                  {% endif%}
              条件中允许使用　比较运算符
              （＜　＞　＞＝　＜＝　＝＝　！＝）
              （not and or）
              注意：　and 和　or 不能同时出现
            3.{% if 条件　%}
                    满足条件运行的内容
                　　{% else %}
                    不满足条件运行的内容
                  {% endif %}
            4.{% if　条件1　%}
                满足条件1运行的内容
            　　{% elif 条件2　%}
                满足条件2运行的内容
              {% elif 条件3　%}
                满足条件3运行的内容
              {% else %}
                不满足条件运行的内容
              {% endif %}
    3.过滤器
        １．作用
            过滤数据
            在显示变量的数据之前，　允许对数据进行帅选或改版
        ２．语法
            {{变量|过滤器：参数}}
        ３．简单的过滤器
            １．{{value|upper}}
                将value 变为大写字符
            ２．{{value|lower}}
                将value　变为小写字符
            ３．{{value|add:num}}
                将num 拼接到value之后
            ４．{{2|add:"1"}}
                输出3
            ５．{{value|floatformat:n}}
                将value保留几位小数
            6.{{value|truncatechars:n}}
                将字符串截取到n位（包含...）
</code></pre><p>1.模板</p>
<pre><code>１．静态文件
    １．什么是静态文件
        不需要嵌入服务器端内容的文件，一律都是静态文件
            如：图片，css，js，html 都是静态文件
    2.Django 中静态文件的处理
    需要在setting。py中设置静态文件的访问路径和存储路径
        1.指定静态文件的访问路径
            STATIC_URL = /static/
        2.定义静态文件的存储路径
            STATICFILES_DIRS = (BASE_DIR, 目录名)
            允许在项目中以及所有的应用中都创建对应名称得到目录
            STATICFILES_DIRS = (BASE_DIR, &apos;static&apos;)
            static目录下存放的都是静态文件
        3.访问静态文件
            1.  直接使用　localhost:8000/static/***/***
                &lt;img src=&quot;/static/***/***&quot;&gt;
            2.  使用　｛％　static ％｝访问静态资源
                １．在模板的最顶层增加
                    ｛% load static %｝
                ２．在使用静态文件时
                    ｛% static %｝表示的就是静态文件的访问路径
                    &lt;img src=&quot;{% static 'img/huiyuan.jpg'%}&quot;&gt;
2.模板的继承
    １．什么是模板的继承
        当多个模板（网页）具备大部分相同的内容时，就可以使用继承的方式，
        将相同的东西继承过来，再增加／修改属于自己的内容即可
    ２．模板继承的语法
        １．在　父模板中
            必须要标识出来那些内容时允许被修改的
            标签：
                ｛％　block ％｝
                    父模板中正常显示的东西
                 {% endblock %}
            block 的作用：
                定义在　字模板中　允许被修改的地方
                １．在父模板中，正常显示
                ２．在子模板中，如果不修改block 内容的话则按照父模板
                    中的内容正常显示
        ２．在　子模板　中
            １．在最顶层增加一句话
                {% extends '父模板的名称'　%}
            ２．增加block 标签　，改写属于自己的内容
                {% block 名称%}
                        子模板中的内容
                    {% endblock %}
                子模板中的block会覆盖父模板中同名的block内容
</code></pre><p>2.模型　－model</p>
<pre><code>１．什么是模型
    模型，是根据数据库中数据表的结构来创建出来的
    class
    每一张表就是一个class , 
    每一个列就是class的一个属性
    并且在模型中还可以完成数据的　　CRUD 操作
２．创建和使用模型　－　ORM
    １．什么是　ORM
        django 自带ORM
        ORM : Object Relational Mapping
        中文　：对象 关系 映射
        简称 : ORM , O/RM , O/R Mapping

        三大特征:
            1. 数据表 到 类(class) 的映射
                将数据表 自动 生成一个 class 类
                同事也允许将一个class 类 自动生成数据库
                中的一张表
            2. 数据类型的映射
                允许讲表中的字段的数据类型 自动 映射成编程语言中
                对应的数据类型
                也允许将编程语言的数据类型 自动 映射成表中的字段
                的数据类型
            3. 关系映射
                在编程语言中允许将表与表之间的关系映射出来
                表与表之间的关系也可以自动映射到编程语言的 
                class中
            数据库表中的关联关系
                一对一
                一对多
                多对多
    2.ORM 的优点
        1.提高了开发的效率 , 能够 自动完成表到对象的映射
        2.不用 SQl 编码 , 也能够完成对数据的CRUD 操作
            可以省略庞大的数据访问层
3. 创建 和配置 数据库
    1.创建数据库 (支持中文)
        create database databaseName default charset
        utf-8 collate utf8_general_ci;
    2.配置数据库
        在settings.py 中配置数据库的信息
        DATABASES = {
            ...
        }
        连接MySQL 的配置如下
        1.ENGINE : 引擎
            django.db.backends.mysql
        2.NAME :  要连接到的数据库名
        3.USER :  登录到数据库名的用户名, 一般为root
        4.PASSWORD : 登录到数据库的密码
        5.HOST : 要连接的主机 , 本机的话 localhost或 
            127.0.0.1
        6.PORT : 端口号 ,MySQL : 3306
    注意:
        Django 中连接 mysql 的话依赖 pymysql
        在 主目录中 __init__.py
            import pymysql
            pymysql.install_as_MYSQLdb()
4.数据库的同步操作

    1. ./manage.py makemigrations
        1. 作用 : 将每个应用下的 models.py  
        2. 文件生成一个数据库的中间文件
        3. 并保存在 migrations 目录中
    2. ./manage.py migrate
        作用 : 将每个应用下的migration 目录中的
        中间文件同步到数据库中
    3. migrations 文件，主要是记录表中的差异变化，而不是全部记录
        1. 注意， 当线上与线下两个版本共存时，migrations文件需要实时共享，保证文件的完全一致
        2. 且需要及时 执行数据导入(migrate)操作
        3. 否则会在 ORM操作时 产生错误

5.编写Models
    1.注意
        1. Models中的每个class 都称为 模型类(Model类)
            实体类(Entry / Entity)
        2.Models 中的每个模型类,必须继承自
            models.Model
    2.编写模型类
        from django.db import models 

        class Entry(models.Model):
            属性1 = models.字段类型(字段选项)
        字段选项: 是否为空 默认为什么 长度

        eg:
            #创建一个 Publisher 模型类
            #表示出版社信息 , 并包含一下属性
            #1. name : 表示出版社名称
            #2. address : 表示出版社地址
            #3. city : 表示出版社所在城市
            #4. country : 表示出版社所在国家
            #5. website: 表示出版社的网址

        class Publisher(models.Model):
            #表示 varchar 类型 ,最大长度为 30
            name = models.CharField(max_length=30)
            address = models.CharField(max_lenth=50)
            city = models.CharField(max_length=20)
            country = models.CharField(max_length=20)
            website = models.URLField()
    3.字段类型 和 字段选项
        1.字段类型
            1. BooleanField() #bool 类型
            2. CharField()
            3. DateFiels()
            4. DateTimeField() 
            5. DecimalField()
            6. EmailField() # 存电子邮件 - varvhar
            7. FloatField()
            8. ImageField() # 存图片路径 - varchar
            9. IntergerField() #int类型
            10. URLField()
            11. TextFeild() #存大量数据 
        2. 字段选项
            null  默认值为False
            default
            max_length
                指定数据的最大长度
                在CharField 必须要设置的选项
    4. fruitday 
        1.Models : 商品类型 , 商户, 用户
        2.商品类型 - GoodsType
            1.类型名称: title
            2.类型图片
                默认上传至 static/upload/goodtype
            3.类型描述
        3.商品实体 - Goods
            1.商品名称 - title
            2. 商品价格 - pr传ice(DecimalField)
            3.商品规格 - spec
            4.商品图片
                默认上传至 static/upload/goods
            5.销售状态 - isActive(默认值为 True)
    5. 数据的版本切换
        1.  ./ manage.py migrate 
            执行所有应用中最新版本的数据库中间文件
        2. ./manage.py migrate 应用名称 版本号
            执行 应用中 版本号相对应的中间文件
    6. 通过数据库自动导出 Models
        ./manage.py inspectdb &gt; 文件名.py
2. 模型中的 CRUD 


    1. 通过 ORM 向 DB中增加数据
        1.Entry.objects.create(属性 = 值, 属性 = 值)
            Entry: 具体要操作的 model类
            eg:
                Author.objects.create(name=&apos;zsf&apos;, age=85)
        2. 创建一个Models对象 , 通过对象的save()操作
            obj = Author(names = &apos;老舍&apos;, age=58)
            obj.save()
        3. 使用字典构建对象 , 通过save()完成
            dic = {
                &apos;属性一&apos; : 值一,
                &apos;属性二&apos; : 值二,
                .....
            }

            obj = Entry(**dic)
            obj.save()
    2. 查询操作(重难点)

        - 通过 Entry.objects 调用查询接口
        1. 基本查询操作
            语法: all()
            select * from Entry
            op = Entry.objects.all()
            返回 : QuerySet
            &lt;QuerySet [&lt;Author: Author object&gt;]&gt;
            提取字段值: op.字段名,循环遍历
        2. 查询值定列
            语法: values (&apos;列1&apos;, &apos;列2&apos;, ...)
            用法: Entry.objects.values(&quot;列1&quot;, &quot;列2&quot;)
            返回: QuerySet 字典对象(使用i[&apos;names&apos;]提取)
            注意: 
                values()可用在所有的返回查询结果集的方法的后面
            eg: 
                Author.objects.values(&apos;names&apos;, &apos;age&apos;)
                等同于 select names,age from Author
        3. 查询值定列
            语法 : values_list(&apos;列1&apos;, &apos;列2&apos;)
            用法: Entry.objects.values(&quot;列1&quot;, &quot;列2&quot;)
            返回: QuerySet 元组对象 (使用下标i[0]提取)
            &apos;&lt;QuerySet [(&apos;朱自清&apos;, 85), (&apos;老舍&apos;, 58), (&apos;莫言&apos;, 59)]&gt;&apos;
        4. 排序函数
            语法: order_by(&apos;-列1&apos;, &apos;列2&apos;)
            用法: Entry.objects.order_by(&apos;-列1&apos;, &apos;列2&apos;)
                默认的排序规则是升序
                如果需要降序 ,在序号名前加上 &apos;-&apos;
        5. exclude()
            条件取反
            Entry.objects.exclude(id= 3， name = john)
            select * from Author where not(id = 3 , name = john)
        6. 根据条件查询部分行数据(重难点)
            filter(参数)
            Entry.objects.filter(参数)
            1.使用 Entry 中的属性作为查询参数
                多个参数的话 , 使用 &apos;,&apos; 隔开 
                Author.objects.filter(id = 1 , names = &apos;莫言&apos;)
                where  id=1 and names = &apos;莫言&apos;
            2. 通过Field Lookup (查询表达式)完成复杂条件的构建
                查询表达式 : 每个查询表达式 都是一个独立的查询条件
                可以用在所有的有查询条件的位置处  &apos;__&apos; 双下划线
                1. __exact

                    精确查询,等值判断
                    Entry.objects.filter(属性__exact = 值)
                    等同于 Entry.objects.filter(属性=值)
                    ORM: Author.objects.filter(email__exact=None)
                    SQL: where email is null
                2. __contains

                    作用: 查询包含指定关键字的记录
                    ORM: Author.objects.filter(name__contains = &apos;ao&apos;)
                    SQL: where name like &apos;%ao%&apos;
                3. __lt __gt __lte __gte

                    小于 大于 小于等于 大于等于
                4. __startswith

                    where name like &apos;nam%&apos;
                5. __endswith

                    where name like &apos;%nam&apos;

        7. 查询一条记录

            Entry.objects.get() # 查询不到或者不为一条记录时报错

        8. 删除和修改
            1. 修改单个数据
                1. 通过 get () 得到要修改的实体对象
                2.通过实体对象的属性修改属性值
                3.再通过实体对象的save()保存到数据库
                eg:
                    au = Author.objetcs.get(id= 1)
                    au.names = &apos;老舍&apos;
                    au.age = 45
                    au.save()

            2. 批量修改数据
                调用查询结果集的 update() 完成批量修改

                Entry.objects.all().update(属性 = 值)
                eg : 
                    Author.objects.all().update(age = 75)
            3. 删除数据
                调用实体对象 / 查询结果集的 delete () 即可
                1. 删除单个对象
                    obj = Author.objects.get(id =1 )
                    obj.delete()
                    obj.save()
                2. 删除多个对象

                    Author.objects.all().delete()
</code></pre><p>1.转发 与 重定向</p>
<pre><code>1. 转发
2. 重定向
    1.什么是重定向
        重新向新访问地址发送请求(服务器端)
    2.语法
        from django.http import HttpResponseRedirect
        return HttpResponseReidrect(url)
</code></pre><p>2.ORM操作</p>
<pre><code>from django.db.models import F,Q
更新Author表中所有人的年龄 , 年龄 + 10
错误写法:
    Author.objects.all().update(age=age+10)
正确写法:
    Author.objects.all().update(age=F(&apos;age&apos;)+10)
用法:
    在执行操作中,获取某列的值时使用
    F(&apos;列名&apos;)
    脱离操作之后无效
或操作:
    Q()在条件查询条件中, 可以完成或(or)的操作
    Q(表达式)|Q(表达式)  为一个表达式

    ex : 查询年龄大于等于 74 或者 id = 6 的人
    Author.objects.filter(Q(id = 6)|Q(age__gte = 74))
    select * from index_author where id = 6 or age &gt;=74
3. 原生的数据库操作方法
    1.查询
        函数: raw(sql语句)
        语法: Entry.objects.raw(sql)
        返回: Queryset
    2.增删改
        def doSQL(request):
            with connection.cursor() as cursor:
                sql = &apos;delete from author&apos;
                cursor.execute(sql)
                return HttpResponse(&apos;...&apos;)
</code></pre><ol start="3">
<li><p>后台管理Models</p>
<pre><code>1.后台的配置
    登录地址: http ://localhost:8000/admin
    创建后台管理员
    ./manage.py createsuperuser
2.from .models import *

  admin.site.register(Entry)
3.修改 models.py 处理显示内容
    1.在models.py 中 ,为 各个 class 追加
    def __str__(self):
        return self.属性名
4.通过models 类的内部类 Meta 定义每个类的展现形式
    Class Author(models.Model):
        class Meta:
            1.db_ table
                指定该实体类的对应到的表的名称

            2.verbose_name
                定义当前实体类在后台管理的列表页中名称(单数形式)
            3.verbose_name_plural
                定义当前实体类在后台管理的列表页中名称(复数形式)
            4.ordering
                指定实体数据列表页中的排序规则
                取值是一个列表, 默认按升序 排序
                降序 则需要手动添加 负号
</code></pre></li>
<li><p>高级管理</p>
<pre><code>１．在　admin.py 中创建高级管理类
    １．定义　EntryAdmin,　继承自　admin.ModelAdmin
    class AuthorAdmin(admin.ModelAdmin):
        pass
    ２.  admin.site.register(Entry, EntryAdmin)
    3.  admin.site.register(Author, AuthorAdmin)
２．定制高级管理信息
    1.list_display
            作用：　指定在　列表页中　能够显示的字段们
    ex： list_display = [‘names’， ‘age’， ‘email’]
2. list_display_links 
    作用：指定在列表页中也能链接到详情页的字段们
    取值：由属性名称组成的元组和列表
    注意：取值只能出现在list-display中
3.list_editable
    作用： 允许在列表页就能进行编辑的字段们
    取值：由属性名称组成的元素或列表
    注意：取值不能出现在list_display_links 中
          即字段不能同时被被编辑 又同时是一个链接
4.search_fields
    作用： 添加允许被搜索的字段们
    取值：由属性名组成的元组或列表

5.list_filter
    作用：在列表的右侧增加一个过滤器，实现快速筛选
    取值：由属性名称组成的元组或列表
6.date_hierarchy （字段名--字符串）
    作用：在列表页的顶端增加一个时间选择器
    取值必须是 DateField 或者 DateTimeField
7.fields
    作用： 在详情页面中， 指定显示哪些字段并按照什么样的顺序显示
    取值：由属性名称组成的元组或列表
8.fieldsets
    作用： 在详情页中，对字段们机型分组显示
    注意： fieldsets 和 fields 不能共存
    语法：
        fieldsets = （
            #分组1
            （
            &apos;分组名称&apos;：{
            &apos;fields&apos;:(属性1 ， 属性2)，
            &apos;classes&apos;:(&apos;collapse&apos;,),
            }
            ），
            #分组2
            （），
        ）
</code></pre></li>
</ol>
<p>5.关系映射</p>
<pre><code>1.一对一映射
    1.什么是一对一
        A表中的一条记录只能与B表中的一条记录相关联
      数据库中实现
        A表中设置主键
        B表中增加一列，并引用自A表的主键，还得增加一个唯一约束
    2.语法
        在关联的两个类的任何一个类中，增加
        属性 = models.OneToOneField(Entry)
    3.查询
        class Wife（models.Model）：
            author = models.OneToOneField(Author)
        正向查询：通过wife 查找 Author
            wife = Wife.objects.get(id=1)
            author = wife.author
        反向查询：通过author 找 wife    
            author = Author.objects.get(id=3)
            wife = author.wife;
            wife 是 Django通过 OneToOneField 在 Author 中默认增加                    的隐式属性，为全小写
2.一对多映射
    1.什么是一对多
        A表中的一条数据可以与B表中的多条数据关联
        B表中的一条数据只能与A表中的一条数据关联
    2.在数据库中的体现
        通过外键（Foreign Key ）来体现一对多
        在&apos;多&apos;表中增加外键（foreign Key）对&quot;一&quot;表的主键组成
    3.语法
        使用外键（Foreign Key）
        在&quot;多&quot;的实体中，增加：
        属性 = models.foreignKey(Entry)
        eg：
            Book(多) 和 Publisher（一）
        Class Book（models.Model）:
            ... ...
            publisher = models.ForeignKey(Publisher)
    4.查询
         1.正向查询 - 通过 Book 查询 Publisher
            通过 多 查询 少
            book = Book.objects.get(id = 1 )
            publisher = book.Publisher
         2.反向查询 - 通过Publisher查询Book
            通过 少 查询 多
            Django 会在 1 的实体 中增加关联对象_set属性
            用于查询 多的数据
            结合 Publisher 和 Book 之间的关系
            在Publisher 中增加一个 book_set属性
        ex：
            publisher = publisher.objects.get（id = 1）
            book = publisher.book_set.all()
3.多对多映射
    A表中的一条数据可以与B表中的任意多条数据关联
    B表中的一条数据可以与A表中的任意多条数据关联
    ex：
        作者 与 书籍
    1.在数据库中的体现
        必须创建第三张表， 关联涉及到的两张表数据
    2.语法
        允许在任何一个实体中增加操作
        entry = models.ManyToManyField(Entry)
        ex:
        class Author(models.Model):
            book = models.ManyToManyField(Book)
    3.查询
        1.正向查询-通过Book查询所有的Author
            book = Book.objects.get(id = 1)
            authors = book.author.all() 
            通过 关联属性.all() 查询所有所有对应数据

        2.反向查询-通过Author查询所有的Book()
            author = Author.objects.get(id = 1)
            books = author.book_set.all()
        通过django中的 属性_set 进行查找
</code></pre><p>6。自定义查询对象 - objects</p>
<pre><code>1.声明类EntryManager， 继承自models.Manager
    在 EntryManager 中添加自定义函数
    class EntryManager（models.Manager）:
        return ... ...
2. 使用 EntryManager 覆盖models 类中的objects
    class Entry（models。Model）
        objects = EntryManager()
</code></pre><p>7.HttpRequest</p>
<pre><code>1.HTTP 协议
    1.请求（request）
        1.请求起始行
        2.请求消息头
        3.请求主体
    2.相应（response）
        1.响应起始行
            协议名称/版本号 响应状态码 原因短句
        2.响应消息头
        3.响应主体
2.HttpRequest 介绍
    1.什么是HttpRequest    
        HttpRequest 在Django中对请求对象的封装体现
        它封装了请求过程中所有的信息， 在Django中
        HttpRequest被化身成了request封装到视图处理函数
        作为参数， 在调用视图时自动传入

    2. HttpRequest中的主要内容
        1.request.scheme:请求协议
        2.request.body：请求主体
        3.request.path：请求路径
        4.request.get_host(): 请求主机/域名
        5.request.method：请求方法
        6.request.GET ： get请求方式提交的数据
        7.request.POST ： post请求方式提交的数据
        8.request.COOKIES ： cookies
    3. 获取 querydict 中的 类似多选框，一个键对应一个列表 # &lt;QueryDict {&apos;a&apos;:[&quot;a&quot;, &quot;b&quot;]}&gt;
        1. 如果使用一个 querydict.get(&apos;a&apos;)
            1. 只能获取一个值, &quot;b&quot;
        2. 使用querydict.getlist(&quot;a&quot;)
            1. 可以获取到 列表 [&quot;a&quot;, &quot;b&quot;]
</code></pre><p>request中的变量</p>
<pre><code>[&apos;COOKIES&apos;, &apos;FILES&apos;, &apos;GET&apos;, &apos;META&apos;, &apos;POST&apos;, &apos;__class__&apos;, &apos;__delattr__&apos;, &apos;__dict__&apos;, &apos;__dir__&apos;, &apos;__doc__&apos;, &apos;__eq__&apos;, &apos;__format__&apos;, &apos;__ge__&apos;, &apos;__getattribute__&apos;, &apos;__gt__&apos;, &apos;__hash__&apos;, &apos;__init__&apos;, &apos;__iter__&apos;, &apos;__le__&apos;, &apos;__lt__&apos;, &apos;__module__&apos;, &apos;__ne__&apos;, &apos;__new__&apos;, &apos;__reduce__&apos;, &apos;__reduce_ex__&apos;, &apos;__repr__&apos;, &apos;__setattr__&apos;, &apos;__sizeof__&apos;, &apos;__str__&apos;, &apos;__subclasshook__&apos;, &apos;__weakref__&apos;, &apos;_encoding&apos;, &apos;_get_post&apos;, &apos;_get_raw_host&apos;, &apos;_get_scheme&apos;, &apos;_initialize_handlers&apos;, &apos;_load_post_and_files&apos;, &apos;_mark_post_parse_error&apos;, &apos;_messages&apos;, &apos;_post_parse_error&apos;, &apos;_read_started&apos;, &apos;_set_post&apos;, &apos;_stream&apos;, &apos;_upload_handlers&apos;, &apos;body&apos;, &apos;build_absolute_uri&apos;, &apos;close&apos;, &apos;content_params&apos;, &apos;content_type&apos;, &apos;csrf_processing_done&apos;, &apos;encoding&apos;, &apos;environ&apos;, &apos;get_full_path&apos;, &apos;get_host&apos;, &apos;get_port&apos;, &apos;get_raw_uri&apos;, &apos;get_signed_cookie&apos;, &apos;is_ajax&apos;, &apos;is_secure&apos;, &apos;method&apos;, &apos;parse_file_upload&apos;, &apos;path&apos;, &apos;path_info&apos;, &apos;read&apos;, &apos;readline&apos;, &apos;readlines&apos;, &apos;resolver_match&apos;, &apos;scheme&apos;, &apos;session&apos;, &apos;upload_handlers&apos;, &apos;user&apos;, &apos;xreadlines&apos;]
</code></pre><p>8.使用forms 模块处理表单</p>
<pre><code>forms 模块的作用
    通过 forms 模块，允许将表单与class 相结合， 可以自动生成表单控件
使用forms 模块
    1.创建 forms.py 文件
    2.导入 forms
        from django import forms
    3.创建 class， 一个 class 对应一个表单
        必须继承自 forms.Form 类
    4.在class 中创建属性
        一个属性对应着一个表单控件
        （参考文档）
在模块中解析 form 对象
    1.注意
        1.需要自定义&lt;form&gt;
        2.需要自定义 提交按钮
    2.解析方式
        1.手动解析
          在视图中创建xxForms()并发送到模板中
          ex:
            form = RemarkForm()
            return render(request, &apos;xx.html&apos;, locals())
          模板中：
            {% for field in form %}
					{{field.label}}: 控件前的文本
					{{field}}: 表示控件
				{% endfor %}
        2.自动解析
          1.{{form.as_p}}
            将表单中的每个属性都解析成一个p标记，在显示标签以及控件
          2.{{form.as_ul}}
            将表单中的每个属性都解析成一个li标记，在显示标签以及控件
            注意：需要自定义&lt;ul&gt;&lt;/ul&gt;&lt;ol&gt;&lt;/ol&gt;
          3.{{form.as_table}}
            将表单中的每个属性都解析成一个tr标记，在显示标签以及控件
            注意：需要自定义&lt;table&gt;&lt;/table&gt;

使用forms.Form获取表单数据
    1.通过 forms.Form 子类的构造函数， 接受post 数据
        form = xxxFrom（request.POST）
    2.需要让 form通过验证后再取值
        form.is_valid()
        返回true：提交的数据已经通过所有验证，允许获取表单数据
        返回false：提交的数据有暂时未通过验证的
    3.获取表单提交的数据
        通过 form.cleaned_data(字典)接收提交的数据
        cd = form.cleaned_data
        print(cd[&apos;subject&apos;])# 获取提交数据中subject对应的数据
forms 的高级处理
    将 Models 和 Forms 结合到一起使用
    1.在 forms.py ,创建 class， 继承自forms.ModelForm
    2.创建内部类： Meta 关联Form 和 Models
      1.model：指定要关联的Model类是哪个
      2.fields：从models中哪些字段要生成控件
        1.取值‘__all__&apos;, 取出全部字段生成控件
        2.指定一个列表， 声明允许生成控件的字段名
      3.labels： 指定每个属性关联的label， 取值为字典
        labels = {
            &apos;property1&apos;:&apos;label1&apos;;
            &apos;property2&apos;:&apos;label2&apos;;
        }
widget 部件
    1.小部件
        小部件（widget）,表示生成到页面中的控件的类型
        以及其他属性
    2.常用部件
        TextInput
        NumberInput
        EmailInput
        URLInput    
        PasswordInput        
        HiddenInput
        CheckboxInput        
        Textarea
        Select
    3.小部件的使用
        1.继承自 forms.Form    
            1.基本版    
                属性 = forms.CharField(label = &apos;XXX&apos;, widget = forms.小部                        件类型)
            2.高级版
                属性 = forms.CharField(label = &apos;XXX&apos;, widget = forms.小部                        件类型（attrs={&apos;perty&apos;:&apos;attr1&apos;}）)
        2.继承自 forms.ModelForm
            widgets= {
                &apos;property1&apos;:forms.小部件类型（attrs = {
                }）
                }
</code></pre><p>9.cookies</p>
<pre><code>1.什么是 cookies
    cookies 是一种数据存储技术
    将一段文本保存在客户端（浏览器）的一种技术， 并可以长时间保存
2.cookies的应用场所
    保存登录信息
    保存搜索关键词

3.django 中使用 cookies
   1.设置 cookies 的值 （将数据保存进客户端）
    语法：
       响应对象.set_cookie(key, value, expires)
       key:cookie的名字
       value:cookie的值
       expires:cookie的保存时间, 以s为单位
        60*60*24*365
    1.不使用模板
        resp = HttpResponse（&quot;&quot;）    
        resp.set_cookie(&apos;uname1&apos;, &apos;zsf&apos;, 60)
        return resp
    2.使用模板
        resp = render(request, &apos;xxx.html&apos;, locals())
        resp.setcookie（key, value, expires）
        return resp
    3.使用重定向
        resp = HttpResponseRedirect(&apos;/XXX/&apos;)
        resp.set_cookie(key, value, expires)
        return resp
   2.获取 cookies 的值 （从客户端中取数据） 
    request.COOKIES
    封装了当前站点下的所有cookie信息
</code></pre><p>session - 会话</p>
<pre><code>1.什么是 session
    session，实际上就是在服务器上为浏览器开辟一段控件，用于保存相关的信息
2.在Django中使用 session        
    1.设置session 的值
        request.session[&apos;key&apos;] = value    
    2.设置过期时间
        request.session.set_expiry(time)
        time 以 秒为单位
    3.获取session 的值
        request.session[&apos;key&apos;]
        request.session.get(key)
    4.删除session的值
        del request.session[&apos;key&apos;]
3.在 setting.py 有关session的设置
    1.SESSION_COOLIE_AGE
        作用：设置sessionID在cookies中的存活时间
        ex：
            SESSION_COOKIE_AGE = 60*10        
            存活十分钟
    2.SESSION_EXPIRE_AT_BROWSER_CLOSE
        布尔值：True
        作用：浏览器关闭时，同时清除服务器上对应的session空间
        布尔值：False
        作用：浏览器关闭时，不清除服务器上对应的session空间
</code></pre>
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/django基础/" rel="tag"># django基础</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/08/16/python-numpy/" rel="next" title="numpy">
                <i class="fa fa-chevron-left"></i> numpy
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/08/17/python-data_analysis/" rel="prev" title="数据分析">
                数据分析 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Laurel-rao</p>
              <p class="site-description motion-element" itemprop="description">Laurel-rao 博客网站</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">39</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">9</span>
                  <span class="site-state-item-name">categories</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">35</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#框架介绍"><span class="nav-number">1.</span> <span class="nav-text">框架介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#框架运行流程"><span class="nav-number">1.1.</span> <span class="nav-text">框架运行流程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#框架主要划分"><span class="nav-number">1.2.</span> <span class="nav-text">框架主要划分</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#快速开始"><span class="nav-number">2.</span> <span class="nav-text">快速开始</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Models-使用"><span class="nav-number">3.</span> <span class="nav-text">Models 使用</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#连接数据库"><span class="nav-number">3.1.</span> <span class="nav-text">连接数据库</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#配置mysql数据库"><span class="nav-number">3.1.1.</span> <span class="nav-text">配置mysql数据库</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#操作数据库"><span class="nav-number">3.2.</span> <span class="nav-text">操作数据库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#注意事项"><span class="nav-number">3.3.</span> <span class="nav-text">注意事项</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Django主要文件介绍"><span class="nav-number">4.</span> <span class="nav-text">Django主要文件介绍</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#路由匹配"><span class="nav-number">5.</span> <span class="nav-text">路由匹配</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Django中的应用"><span class="nav-number">6.</span> <span class="nav-text">Django中的应用</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Laurel-rao</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
